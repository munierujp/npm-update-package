import { app } from '../../../app'
import { SemVer } from '../../../semver'
import { createPullRequestBody } from './createPullRequestBody'

describe('createPullRequestBody', () => {
  it('returns pull request body', () => {
    const actual = createPullRequestBody({
      name: '@typescript-eslint/eslint-plugin',
      currentVersion: SemVer.of('1.0.0'),
      newVersion: SemVer.of('2.0.0'),
      level: 'major'
    })
    expect(actual).toBe(`This PR updates these packages:

|Package|Level|Current version|New version|
|---|---|---|---|
|[@typescript-eslint/eslint-plugin](https://www.npmjs.com/package/@typescript-eslint/eslint-plugin)|major|\`1.0.0\`|\`2.0.0\`|

<details>
<summary>Metadata</summary>

**Don't remove or edit this section because it will be used by npm-update-package.**

<div id="npm-update-package-metadata">

\`\`\`json
{
  "version": "${app.version}",
  "packages": [
    {
      "name": "@typescript-eslint/eslint-plugin",
      "currentVersion": "1.0.0",
      "newVersion": "2.0.0",
      "level": "major"
    }
  ]
}
\`\`\`

</div>
</details>

---
This PR has been generated by [${app.name}](${app.web}) v${app.version}`)
  })
})
